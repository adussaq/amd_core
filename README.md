# amd_core

For a working example please go to: https://alexdussaq.info/amd_core/<br />
The same <a href="https://github.com/adussaq/amd_core#fun-example-of-how-to-utilize-amd_corerequire">example</a> is shown below and is included as index.html in this directory.

This package insures that the following scripts are loaded before any calculation has taken place:
* jquery-2.1.4.min.js
* es6-promise-3.0.2.min.js [*Only loads in enviornments where __window.Promise__ is undefined*]

Following this a series of core functions are added onto the amd_core object. They are detailed below.

###**amd_core**###
|Property|Description|
|---------------|----------------|
|require|[*function*] Following the loading of the above required list, this loads a list of scripts described by it's input: <a href="https://github.com/adussaq/amd_core#require_object">**require_object**</a> [*required, object*]. If any script has already been loaded, it will not be loaded again. Once all scripts have loaded it executes the callback function described in the same object. |
|isArray|[*function*] Takes in any JavaScript object, and returns true if the object is an array, false otherwise. |


###**require_object**###
|Property|Description|
|---------------|----------------|
|async|[*optional, array*] If included, this must be an array of urls [*string*]. These will all be loaded asynchronously, the more modules you can include here the faster your page will load. |
|ordered|[*optional, 2D arrary*] If included, this must be an array of arrays, each internal array is an array of urls [*string*] for scripts that depend on being loaded one at a time sequentially. |
|callback|[*required, function*] Executed upon completion of loading of all scripts described above. The callback is passed an object of <a href="https://github.com/adussaq/amd_core#url_obj">**url_obj**</a>s [*object*] with keys being the urls of the scripts passed in. |

###**url_obj**###
|Property|Description|
|---------------|----------------|
|url|[*string*] Address of script loaded|
|loaded|[*boolean*] True/False for if the script successfully loaded.|
|promise|[*object*] The promise object generated by the loading of this script. For more on promises visit: http://www.html5rocks.com/en/tutorials/es6/promises/|


##Fun example of how to utilize amd_core.require.##
To try yourself: https://alexdussaq.info/amd_core/ 
Each person in the ordered lists requires the hello function from the people below them immediately on loading.

    amd_core.require({
        async: ["name/sue.js", "name/billy.js", "name/kelly.js"], //We do not care the order we are loaded
        ordered: [  //Each one of these will start loading at their base node at the same time
                    // In otherwords John and Sally will start loading immediately, once john is done
                    // Lou, and bob will start loading, etc.
            [
                "name/john.js",
                "name/lou.js", // I cant load without john
                "name/tom.js" // I cant load without john and lou
            ],
            [
                "name/john.js", // This will still only be loaded once
                "name/bob.js" // I cant load without john
            ],
            [
                "name/john.js", // This will still only be loaded once
                "name/lou.js", // This will still only be loaded once, but I cant load without john
                "name/cindy.js" // I cant load without john and lou
            ],
            [
                "name/sally.js",
                "name/harry.js" //I can't load without sally
            ]
        ],
        callback: function (x) {
            for (var url in x) {
                //Utilizes the promises to display results
                if (x.hasOwnProperty(url)) {
                    x[url].promise.then(function (name) {
                        console.log(name.replace(/name\/|\.js/g, "") + ' is here!');
                    }).catch(function (x) {
                        console.error(x);
                    });
                }
            }
        }
    });
